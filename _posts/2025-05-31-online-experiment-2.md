---
title: 온라인 통제 실험 프로세스 End-to-end
categories:
- Experiments
---

 이제 온라인 통제 실험을 실제로 실행해보겠습니다. 막상 시작하려고 하면 무엇부터 준비해야 할지 막막할 수 있습니다. 일반적으로 실험 프로세스는 **실험 이전 → 실험 진행 → 실험 이후**의 세 단계로 나뉩니다. 이번 글에서는 실무에서 실험을 수행할 때 필요한 태스크를 단계별로 정리해보겠습니다.

 ![실험 실행 프로세스](/assets/images/experiment/experiment-2-1.png)

 실험 프로세스에는 크게 실험을 주도하는 Experiment Owner 조직과 데이터 전문성을 가진 Data Analysis 조직, 실험 전후로 Front-end, Back-end 개발을 지원하는 Engineering 조직이 관여합니다. 이전 글에서 살펴봤던 상세 페이지 예시를 활용하여 전체 실험 프로세스를 따라가 볼게요.
<!-- more -->

1. **실험 가설 수립**
    
     실험을 수행하기에 앞서 **검증하고자 하는 실험 가설을 수립**합니다. 한 줄의 가설이 실험의 방향을 명확히 설정하기 때문에 전체 실험 프로세스에서 가장 핵심적인 단계 중 하나입니다. 예시는 상세 페이지가 복잡해서 탐색이 피로하다는 고객의 VoC로부터 시작되었습니다. 이 VoC를 “상세 페이지의 복잡도를 낮추면 고객 탐색 여정이 개선된다”라는 가설의 형태로 변환할 수 있습니다.
<br>
<br>

2. **평가 지표 설계**
    
     가설을 수립한 후에는 실험 오너가 **가설을 검증할 수 있는 지표를 설계**합니다. 실험을 통해 성패를 판단하려면 정량적으로 측정이 가능한 지표를 선정해야 합니다. 만약 측정이 어렵다면 간접적인 영향력을 판단할 수 있는 대리 변수(proxy variable)를 사용할 수도 있습니다. 위의 가설에서는 “고객 당 평균 상세 페이지 체류시간”을 목표 지표(Goal metric)로 측정하면 고객 탐색 여정이 개선되었는지를 검증할 수 있겠죠. 더 복잡한 형태의 실험에서는 평가 지표 프레임워크의 설계가 특히 중요하며, 이에 대해서는 별도로 다뤄보겠습니다. 
<br>
<br>
    
3. **실험 디자인 설계**
    
     제안된 실험 가설과 지표를 바탕으로 **랜덤 할당이 가능하도록 실험 디자인을 설계**합니다. 우리는 “고객 당 평균 상세 페이지 체류시간”을 지표로 설정했기 때문에 고객 단위로 랜덤 할당이 필요합니다. 만약 세션 단위의 지표를 설정했다면 세션 단위로 할당해야 합니다. 
    
     또한 대조군에 기존 화면을, 실험군에 새로운 화면을 노출했을 때 랜덤 할당의 가정이 유효한지 확인합니다. 한 명의 고객에게 대조군과 실험군의 화면이 모두 노출되는 등의 변형군 간 간섭이 일어나지 않는지, 실험군과 대조군의 노출 조건이 달라 편향이 발생하지 않는지도 면밀히 점검해야 합니다. 
<br>
<br>
    
4. **실험 설정 및 사전 검토**
    1. (Experiment Owner) 실험 Admin 설정
        
         이제 설계에 따라 **실험을 셋팅하는 단계**입니다. 실험 오너는 실험 어드민 화면에서 할당 기준과 변형군 별 노출할 화면/알고리즘/데이터 등을 설정합니다. 실험 전 테스트 유저를 지정하거나, 사업자를 제외하는 등 특정 조건을 포함/제외하는 설정도 이 단계에서 진행합니다.
        
    2. (Data Analysis) 실험 사전 준비
        
         데이터 분석 조직에서는 **실험의 독립성과 무작위성을 검토**합니다. 하나의 변형군에 특정 성향의 고객이 집중되지 않는지 A/A 테스트를 수행하고, 검정력 분석을 통해 최소 실험 기간을 산출하여 실험의 신뢰도를 확보합니다. 
        
         만약 지표 집계가 실험 플랫폼에 내재화되어 있지 않다면 로그 데이터를 처리하여 **지표를** **집계할 수 있도록 코드를 준비**합니다. 초기에는 지표를 집계하는 쿼리면 충분하고, 실험이 점차 늘어나 이 단계를 자동화해야 한다면 dbt 등을 활용한 메트릭 스토어 구축이 필요합니다.
        
    3. (Engineering) 변형군 별 Asset 개발 및 설정
        
         엔지니어링 조직에서는 **변형군 별로 필요한 Asset을 개발**하고 실험 어드민 설정에 따라 각 Asset이 **잘 노출될 수 있도록 설정**합니다. Asset은 새로운 상세 페이지 화면이나 알고리즘(또는 알고리즘 API), UI 요소 등을 의미합니다. 
<br>
<br>
        
5. **지표 집계/모니터링**
    
     실험이 시작되면 **지표를 집계하고 지표의 변화를 모니터링**합니다. 먼저 랜덤 할당의 가정이 깨지지 않았는지 SRM(Sample Ratio Mismatch)을 확인합니다. 만약 SRM이 깨졌다면, 즉 설계한 변형군 간 비율이 유지되지 않는다면, 해당 실험의 결과는 더 이상 의미가 없으므로 실험을 중단하고 새로운 실험을 셋팅해야 합니다. 
    
     이제 계획한 기간 동안 실험을 모니터링합니다. 실험 결과와 무관하게 실험은 반드시 계획했던 기간까지 진행되어야 합니다. 실험을 지속하기 위한 충분 조건인 가드레일 지표가 과도하게 하락하여 실험을 즉시 중단하는 경우가 아니라면 최소한 7일 간 실험이 진행되어야 그 결과에 대한 신뢰도를 확보할 수 있습니다.
<br>
<br>
    
6. **실험 유의성 검토**
    
     실험이 종료되면 데이터 분석 조직은 **변형군 간 지표의 차이가 통계적으로 유의한지 검증**합니다. 일반적으로 두 집단 간 차이에 대한 가설을 검증하는 T-test를 수행하며, 이 과정을 통해 변형군 간 지표의 차이가 우연히 발생한 것이 아니라 실질적으로 Treatment로 인해 발생한 것이라고 판단할 수 있습니다. 
    
     한편 실험 오너는 측정 지표의 차이가 **비즈니스 관점에서 의미 있는 개선**인지 검토합니다. 통계적으로는 수치의 차이가 유의미할 수 있으나 절대적인 수치 자체가 비즈니스에서는 의미가 없을 수 있고, 또 지표로는 측정되지 않는 부작용의 발생 가능성 등을 종합적으로 살펴봅니다. 
<br>
<br>
    
7. **개발 배포 결정**
    
     실험 오너와 데이터 분석 조직은 **유의성 검토 결과를 바탕으로 종합적인 결론**을 내립니다. 이 때 양쪽 조직 간 의견이 균형을 이루는 것이 중요합니다. 새로운 상세 페이지 화면을 노출한 실험군에서 고객당 평균 체류시간이 증가했다면 성공적으로 판단하여 새로운 화면을 배포할 수 있도록 개발 조직에 요청합니다. 만약 체류시간이 증가하지 않았거나, 체류시간이 증가했지만 그것이 반드시 고객 탐색 여정의 개선을 의미하는 것이 아니라는 의심이 들면 재실험을 하거나, 새로운 실험을 실행해볼 수 있습니다(두 번째 경우는 애초에 측정 지표를 잘못 설정한 것이니 잘못된 설계라고 볼 수 있겠네요).
<br>
<br>    

 실험은 이 과정을 반복하며 지식을 축적하고, 그 지식을 바탕으로 더 나은 방향으로 발전해 나갑니다. 이어지는 글에서는 단계별로 더 자세한 이야기를 이어가보겠습니다.

 
